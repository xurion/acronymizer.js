function Acronymizer(a){"use strict";a=a||{},"object"!=typeof a&&this.error("Settings must be defined as an object"),this.attributes={},this.events={},this.wrappers=[],this.caseSensitive=!1,this.element=a.element,this.wrapper=a.wrapper||"abbr",this.attributes=a.attributes||{},void 0!==a.pattern&&this.setPattern(a.pattern)}!function(){"use strict";Acronymizer.prototype={error:function(a){throw a=a||"Unknown error",new Error(a)},isElement:function(a){return void 0===a?!1:Object.prototype.hasOwnProperty.call(a,"nodeName")},isTextNode:function(a){return void 0!==a&&this.isElement(a)&&3===a.nodeType},isRegExp:function(a){return void 0!==a&&a instanceof RegExp},setElement:function(a){this.isElement(a)||this.error("The element must be defined as an element"),this.element=a},setPattern:function(a){void 0===a&&this.error("Pattern is undefined"),"string"==typeof a||this.isRegExp(a)||this.error("Pattern must be defined as a string or regular expression");var b="g"+(this.caseSensitive?"":"i");this.isRegExp(a)&&(a=new RegExp(a.source,b)),"string"==typeof a&&(a=new RegExp(a,b)),this.pattern=a},setIsCaseSensitive:function(a){"boolean"!=typeof a&&this.error("The bool argument must be defined as a boolean"),this.caseSensitive=a},setWrapper:function(a){"string"!=typeof a&&this.error("The wrapper argument must be defined as a string"),""===a&&this.error("The wrapper argument cannot be an empty string"),this.wrapper=a},setAttribute:function(a,b){(""===a||void 0===a)&&this.error("The key must be defined as a string"),void 0===b&&this.error("The value must be defined"),this.attributes[a]=b},setAttributes:function(a){"object"!=typeof a&&this.error("The attributes argument must be defined as an object");var b;for(b in a)a.hasOwnProperty(b)&&this.setAttribute(b,a[b])},hasClass:function(a,b){return this.isElement(a)||this.error("The element must be defined as an element"),"string"!=typeof b&&this.error("The className must be defined as a string"),a.className.replace(/[\n\t]/g," ").indexOf(b)>-1},isElementSet:function(){return void 0!==this.element&&this.isElement(this.element)},isPatternSet:function(){return void 0!==this.pattern&&this.isRegExp(this.pattern)},isWrapperSet:function(){return"string"==typeof this.wrapper&&""!==this.wrapper},addClassToElement:function(a,b){this.isElement(a)||this.error("The element argument must be defined as an element"),"string"!=typeof b&&this.error("The className argument must be defined as a string"),""===a.className?a.className=b:this.hasClass(a,b)||(a.className+=" "+b)},addAttributesToElement:function(a,b){this.isElement(a)||this.error("The element argument must be defined as an element"),"object"!=typeof b&&this.error("The attributes argument must be defined as an object");var c;for(c in b)b.hasOwnProperty(c)&&("className"===c?this.addClassToElement(a,b.className):a[c]=b[c]);return a},bind:function(a,b){"string"!=typeof a&&this.error("The name argument must be defined as a string"),"function"!=typeof b&&this.error("The func argument must be defined as a function"),this.events[a]=b},trigger:function(a,b){"function"==typeof this.events[a]&&this.events[a].apply(this,b)},getStringPositions:function(a,b){if("string"!=typeof a||!this.isRegExp(b))return[];var c,d=[];if(b.global===!1)c=b.exec(a),d.push(c.index);else for(;null!==(c=b.exec(a));)d.push({text:c[0],length:c[0].length,index:c.index});return d},innerHighlight:function(a){var b,c,d,e,f,g,h,i,j=0,k=a.node,l=a.pattern,m=a.wrapper,n=a.wrapperAttributes;if(-1===(" "+a.node.className+" ").replace(/[\n\t]/g," ").indexOf(" acronymizer-skip "))if(this.isTextNode(k)&&!this.hasClass(k.parentNode,"acronymized")){if(b=this.getStringPositions(k.data,l),b.length>0){if(c=b[0].index,d=b[0].length,f=k.splitText(c),g=f.splitText(d),e=document.createElement(m),this.addAttributesToElement(e,n),this.trigger("beforeWrap",[f.data,e]),this.addClassToElement(e,"acronymized"),e.innerHTML=b[0].text,f.parentNode.replaceChild(e,f),this.trigger("afterWrap",[f.data,e]),this.wrappers.push(e),b.length>1)for(i=b[0].index+b[0].length,h=1;h<b.length;h+=1)c=b[h].index-i,d=b[h].length,f=g.splitText(c),g=f.splitText(d),i+=b[h].index+b[h].length,e=document.createElement(m),this.addAttributesToElement(e,n),this.trigger("beforeWrap",[f.data,e]),this.addClassToElement(e,"acronymized"),e.innerHTML=b[h].text,f.parentNode.replaceChild(e,f),this.trigger("afterWrap",[f.data,e]),this.wrappers.push(e);j=1}}else if(1===k.nodeType&&k.childNodes&&!/(script|style)/i.test(k.tagName))for(h=0;h<k.childNodes.length;h+=1)h+=this.innerHighlight({node:k.childNodes[h],pattern:l,wrapper:m,wrapperAttributes:n});return j},init:function(){this.isElementSet()||this.error("An element has not been defined. Use the setElement() method to set an element"),this.isPatternSet()||this.error("A pattern has not been defined. Use the set pattern method to set a pattern"),this.isWrapperSet()||this.error("A wrapper has not been defined. Use the setWrapper method to set a wrapper"),this.innerHighlight({node:this.element,pattern:this.pattern,wrapper:this.wrapper,wrapperAttributes:this.attributes}),this.trigger("afterWrapAll",[this.wrappers]),this.wrappers=[]}}}();